# Toonflow å‰ç«¯è®¾è®¡

## ä¸€ã€æŠ€æœ¯æ ˆ

| é¡¹ | é€‰å‹ |
|---|------|
| æ¡†æ¶ | Vue 3 + TypeScript |
| æ„å»º | Vite 6 |
| çŠ¶æ€ç®¡ç† | Pinia |
| è·¯ç”± | Vue Router 4 |
| UI ç»„ä»¶åº“ | Element Plus |
| HTTP | Axios |
| WebSocket | @stomp/stompjs |
| å¯Œæ–‡æœ¬ç¼–è¾‘ | Tiptap æˆ– Monaco Editor (ä»£ç /æ–‡æœ¬) |
| å›¾æ ‡ | @iconify/vue |
| CSS | UnoCSS æˆ– Tailwind CSS |

## äºŒã€é¡¹ç›®ç»“æ„

```
frontend/
â”œâ”€â”€ index.html
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ package.json
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts
â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                         # Axios API å°è£…
â”‚   â”‚   â”œâ”€â”€ request.ts               # Axios å®ä¾‹(æ‹¦æˆªå™¨/Token/é”™è¯¯å¤„ç†)
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ project.ts
â”‚   â”‚   â”œâ”€â”€ novel.ts
â”‚   â”‚   â”œâ”€â”€ novelGeneration.ts
â”‚   â”‚   â”œâ”€â”€ storyline.ts
â”‚   â”‚   â”œâ”€â”€ outline.ts
â”‚   â”‚   â”œâ”€â”€ script.ts
â”‚   â”‚   â”œâ”€â”€ asset.ts
â”‚   â”‚   â”œâ”€â”€ storyboard.ts
â”‚   â”‚   â”œâ”€â”€ video.ts
â”‚   â”‚   â”œâ”€â”€ videoCompose.ts
â”‚   â”‚   â”œâ”€â”€ tts.ts
â”‚   â”‚   â”œâ”€â”€ material.ts
â”‚   â”‚   â”œâ”€â”€ config.ts
â”‚   â”‚   â”œâ”€â”€ prompt.ts
â”‚   â”‚   â”œâ”€â”€ task.ts
â”‚   â”‚   â”œâ”€â”€ setting.ts
â”‚   â”‚   â”œâ”€â”€ pipeline.ts
â”‚   â”‚   â””â”€â”€ monitor.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/                 # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts          # STOMP WebSocket å°è£…
â”‚   â”‚   â”œâ”€â”€ useAgentChat.ts          # Agent å¯¹è¯é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ usePipelineProgress.ts   # æµæ°´çº¿è¿›åº¦
â”‚   â”‚   â””â”€â”€ useAuth.ts               # è®¤è¯çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                      # Pinia Store
â”‚   â”‚   â”œâ”€â”€ auth.ts                  # ç”¨æˆ·/Token
â”‚   â”‚   â”œâ”€â”€ project.ts               # å½“å‰é¡¹ç›®
â”‚   â”‚   â””â”€â”€ app.ts                   # å…¨å±€çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ index.ts                 # è·¯ç”±å®šä¹‰ + å®ˆå«
â”‚   â”‚
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â”œâ”€â”€ DefaultLayout.vue        # ä¸»å¸ƒå±€(ä¾§è¾¹æ +é¡¶æ )
â”‚   â”‚   â””â”€â”€ BlankLayout.vue          # ç©ºç™½å¸ƒå±€(ç™»å½•é¡µ)
â”‚   â”‚
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â””â”€â”€ LoginView.vue
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ project/
â”‚   â”‚   â”‚   â”œâ”€â”€ ProjectList.vue      # é¡¹ç›®åˆ—è¡¨(å¡ç‰‡)
â”‚   â”‚   â”‚   â””â”€â”€ ProjectWorkbench.vue # é¡¹ç›®å·¥ä½œå°(å·¦ä¾§å¯¼èˆª)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ novel/
â”‚   â”‚   â”‚   â”œâ”€â”€ NovelManage.vue      # ç« èŠ‚åˆ—è¡¨ + ç¼–è¾‘å™¨
â”‚   â”‚   â”‚   â””â”€â”€ NovelGenerate.vue    # AI å°è¯´ç”Ÿæˆ(å‚æ•°+å®æ—¶é¢„è§ˆ)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ storyline/
â”‚   â”‚   â”‚   â””â”€â”€ StorylineView.vue    # æ•…äº‹çº¿æŸ¥çœ‹/ç¼–è¾‘
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ outline/
â”‚   â”‚   â”‚   â”œâ”€â”€ OutlineList.vue      # å¤§çº²å¡ç‰‡åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ OutlineAgent.vue     # Agent å¯¹è¯ç•Œé¢
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ asset/
â”‚   â”‚   â”‚   â””â”€â”€ AssetManage.vue      # èµ„äº§åˆ—è¡¨ + å›¾ç‰‡ç”Ÿæˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ script/
â”‚   â”‚   â”‚   â””â”€â”€ ScriptManage.vue     # å‰§æœ¬åˆ—è¡¨ + ç¼–è¾‘ + AIç”Ÿæˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ storyboard/
â”‚   â”‚   â”‚   â””â”€â”€ StoryboardWorkbench.vue # åˆ†é•œAgent + åˆ†é•œé¢„è§ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ video/
â”‚   â”‚   â”‚   â”œâ”€â”€ VideoGenerate.vue    # è§†é¢‘ç”Ÿæˆ + é¢„è§ˆ
â”‚   â”‚   â”‚   â””â”€â”€ VideoCompose.vue     # è§†é¢‘åˆæˆé…ç½® + é¢„è§ˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ tts/
â”‚   â”‚   â”‚   â””â”€â”€ TtsView.vue          # é…éŸ³é…ç½® + ç”Ÿæˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ pipeline/
â”‚   â”‚   â”‚   â””â”€â”€ PipelineView.vue     # å…¨è‡ªåŠ¨æµæ°´çº¿
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”‚   â”œâ”€â”€ ModelConfig.vue      # AI æ¨¡å‹é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ PromptManage.vue     # Prompt ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ UserManage.vue       # ç”¨æˆ·ç®¡ç†(ç®¡ç†å‘˜)
â”‚   â”‚   â”‚   â””â”€â”€ SystemSetting.vue    # ç³»ç»Ÿè®¾ç½®
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ material/
â”‚   â”‚   â”‚   â””â”€â”€ MaterialLibrary.vue  # ç´ æåº“
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ task/
â”‚   â”‚   â”‚   â””â”€â”€ TaskCenter.vue       # ä»»åŠ¡ä¸­å¿ƒ
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ monitor/
â”‚   â”‚       â””â”€â”€ Dashboard.vue        # ç›‘æ§ä»ªè¡¨ç›˜
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                  # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AgentChat.vue            # Agent å¯¹è¯ç»„ä»¶(é€šç”¨)
â”‚   â”‚   â”œâ”€â”€ AgentMessage.vue         # æ¶ˆæ¯æ°”æ³¡(æ”¯æŒæµå¼)
â”‚   â”‚   â”œâ”€â”€ MarkdownRenderer.vue     # Markdown æ¸²æŸ“
â”‚   â”‚   â”œâ”€â”€ ImagePreview.vue         # å›¾ç‰‡é¢„è§ˆ/å¯¹æ¯”
â”‚   â”‚   â”œâ”€â”€ VideoPlayer.vue          # è§†é¢‘æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ ProgressBar.vue          # è¿›åº¦æ¡
â”‚   â”‚   â””â”€â”€ ConfirmDialog.vue        # ç¡®è®¤å¼¹çª—
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                       # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ api.d.ts                 # API å“åº”ç±»å‹
â”‚   â”‚   â”œâ”€â”€ novel.d.ts               # å°è¯´ç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ agent.d.ts               # Agent æ¶ˆæ¯ç±»å‹
â”‚   â”‚   â”œâ”€â”€ video.d.ts               # è§†é¢‘ç›¸å…³ç±»å‹
â”‚   â”‚   â””â”€â”€ pipeline.d.ts            # æµæ°´çº¿ç±»å‹
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ format.ts                # æ ¼å¼åŒ–å·¥å…·
â”‚       â””â”€â”€ storage.ts               # localStorage å°è£…
â”‚
â”œâ”€â”€ public/
â””â”€â”€ Dockerfile                       # Nginx é™æ€éƒ¨ç½²
```

## ä¸‰ã€è·¯ç”±è®¾è®¡

```typescript
const routes = [
  { path: '/login', component: LoginView, meta: { layout: 'blank' } },

  // é¡¹ç›®åˆ—è¡¨
  { path: '/projects', component: ProjectList },

  // é¡¹ç›®å·¥ä½œå°ï¼ˆåµŒå¥—è·¯ç”±ï¼‰
  {
    path: '/projects/:projectId',
    component: ProjectWorkbench,
    children: [
      { path: 'novel',             component: NovelManage },
      { path: 'novel/generate',    component: NovelGenerate },
      { path: 'storyline',         component: StorylineView },
      { path: 'outline',           component: OutlineList },
      { path: 'outline/agent',     component: OutlineAgent },
      { path: 'assets',            component: AssetManage },
      { path: 'scripts',           component: ScriptManage },
      { path: 'storyboard/:scriptId', component: StoryboardWorkbench },
      { path: 'video/:scriptId',   component: VideoGenerate },
      { path: 'video/:scriptId/compose', component: VideoCompose },
      { path: 'tts/:scriptId',     component: TtsView },
      { path: 'pipeline',          component: PipelineView },
    ]
  },

  // ç³»ç»Ÿè®¾ç½®
  { path: '/settings/models',   component: ModelConfig },
  { path: '/settings/prompts',  component: PromptManage },
  { path: '/settings/users',    component: UserManage },
  { path: '/settings/system',   component: SystemSetting },

  // å…¶ä»–
  { path: '/materials',  component: MaterialLibrary },
  { path: '/tasks',      component: TaskCenter },
  { path: '/dashboard',  component: Dashboard },
]
```

## å››ã€WebSocket å°è£…

```typescript
// composables/useWebSocket.ts
import { Client } from '@stomp/stompjs'

export function useAgentWebSocket(agentType: string, projectId: string) {
  const client = new Client({
    brokerURL: `ws://${location.host}/ws/agent/${agentType}/${projectId}`,
  })

  const messages = ref<AgentMessage[]>([])
  const isStreaming = ref(false)
  const currentStreamText = ref('')

  client.onConnect = () => {
    // è®¢é˜…äº‹ä»¶
    client.subscribe(`/topic/agent/${agentType}/${projectId}/event`, (msg) => {
      const event = JSON.parse(msg.body)
      handleEvent(event)
    })
  }

  function handleEvent(event: { type: string; data: any }) {
    switch (event.type) {
      case 'stream':
        isStreaming.value = true
        currentStreamText.value += event.data
        break
      case 'response_end':
        isStreaming.value = false
        messages.value.push({ role: 'assistant', content: currentStreamText.value })
        currentStreamText.value = ''
        break
      case 'subAgentStream':
        // æ˜¾ç¤º Sub-Agent è¾“å‡ºï¼ˆä¸åŒé¢œè‰²ï¼‰
        break
      case 'toolCall':
        // æ˜¾ç¤ºå·¥å…·è°ƒç”¨çŠ¶æ€
        break
      case 'transfer':
        // æ˜¾ç¤º Agent åˆ‡æ¢é€šçŸ¥
        break
      case 'refresh':
        // è§¦å‘æ•°æ®é¢æ¿åˆ·æ–°
        break
      case 'chapterDelta':
        // å°è¯´ç”Ÿæˆï¼šç« èŠ‚æ­£æ–‡æµå¼å¢é‡
        break
      case 'error':
        // æ˜¾ç¤ºé”™è¯¯
        break
    }
  }

  function send(message: string) {
    messages.value.push({ role: 'user', content: message })
    client.publish({
      destination: `/app/agent/${agentType}/${projectId}/send`,
      body: JSON.stringify({ type: 'user', data: message })
    })
  }

  function cleanHistory() {
    messages.value = []
    client.publish({
      destination: `/app/agent/${agentType}/${projectId}/clean`,
      body: ''
    })
  }

  return { messages, isStreaming, currentStreamText, send, cleanHistory, client }
}
```

## äº”ã€å…³é”®é¡µé¢äº¤äº’è®¾è®¡

### 5.1 AI å°è¯´ç”Ÿæˆé¡µï¼ˆNovelGenerate.vueï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·¦ä¾§ (40%)                â”‚  å³ä¾§ (60%)                â”‚
â”‚                             â”‚                             â”‚
â”‚  åˆ›ä½œå‚æ•°è¡¨å•:               â”‚  å®æ—¶ç”Ÿæˆé¢„è§ˆ:               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ é¢˜æ: [ä¸‹æ‹‰é€‰æ‹©]     â”‚   â”‚  â”‚ è¿›åº¦: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 8/10ç«  â”‚â”‚
â”‚  â”‚ é£æ ¼: [ä¸‹æ‹‰é€‰æ‹©]     â”‚   â”‚  â”‚                         â”‚â”‚
â”‚  â”‚ åˆ›ä½œæç¤º: [å¤šè¡Œæ–‡æœ¬]  â”‚   â”‚  â”‚ å½“å‰: ç¬¬8ç«  - æš—å½±é™ä¸´   â”‚â”‚
â”‚  â”‚ ç›®æ ‡å·æ•°: [3]        â”‚   â”‚  â”‚                         â”‚â”‚
â”‚  â”‚ æ¯å·ç« èŠ‚: [10]       â”‚   â”‚  â”‚ [æµå¼æ–‡æœ¬è¾“å‡ºåŒºåŸŸ]       â”‚â”‚
â”‚  â”‚ æ¯ç« å­—æ•°: [3000]     â”‚   â”‚  â”‚ é™ˆé»˜æ¨å¼€é“é—¨ï¼Œå†·é£è£¹ç€   â”‚â”‚
â”‚  â”‚ ä¸»è§’è®¾å®š: [å±•å¼€è¡¨å•]  â”‚   â”‚  â”‚ é“é”ˆå‘³æ‰‘é¢è€Œæ¥ã€‚ä»–ä¸‹æ„   â”‚â”‚
â”‚  â”‚ ä¸–ç•Œè§‚: [å¤šè¡Œæ–‡æœ¬]    â”‚   â”‚  â”‚ è¯†åœ°æ”¾æ…¢è„šæ­¥ï¼Œå·¦æ‰‹...â–ˆ   â”‚â”‚
â”‚  â”‚                     â”‚   â”‚  â”‚                         â”‚â”‚
â”‚  â”‚ [å¼€å§‹ç”Ÿæˆ]           â”‚   â”‚  â”‚                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚                             â”‚  â”‚ å·²å®Œæˆç« èŠ‚:              â”‚â”‚
â”‚  Agent å¯¹è¯åŒº:              â”‚  â”‚ â–¸ ç¬¬1ç«  å¤§å´©å¡Œçš„ç¬¬ä¸ƒå¹´    â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚ â–¸ ç¬¬2ç«  è§‰é†’è€…çš„ä»£ä»·     â”‚â”‚
â”‚  â”‚ [å¯¹è¯æ¶ˆæ¯åˆ—è¡¨]       â”‚   â”‚  â”‚ â–¸ ç¬¬3ç«  çŒäººå…¬ä¼š         â”‚â”‚
â”‚  â”‚ [è¾“å…¥æ¡†] [å‘é€]      â”‚   â”‚  â”‚ ...                     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 åˆ†é•œå·¥ä½œå°ï¼ˆStoryboardWorkbench.vueï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸Šæ–¹: Agent å¯¹è¯åŒº (å¯æŠ˜å , 30%)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [Agentå¯¹è¯æ¶ˆæ¯] [Sub-Agentåˆ‡æ¢æç¤º] [å·¥å…·è°ƒç”¨çŠ¶æ€]     â”‚â”‚
â”‚  â”‚ [è¾“å…¥æ¡†] [å‘é€]                                      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                          â”‚
â”‚  ä¸‹æ–¹: åˆ†é•œé¢„è§ˆåŒº (70%)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ç‰‡æ®µ1: é™ˆé»˜æ¨å¼€é“é—¨                                   â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”                         â”‚â”‚
â”‚  â”‚ â”‚é•œå¤´1â”‚ â”‚é•œå¤´2â”‚ â”‚é•œå¤´3â”‚ â”‚é•œå¤´4â”‚  [ç”Ÿæˆå›¾ç‰‡] [ç”Ÿæˆè§†é¢‘] â”‚â”‚
â”‚  â”‚ â”‚ ğŸ–¼ï¸ â”‚ â”‚ ğŸ–¼ï¸ â”‚ â”‚ â³ â”‚ â”‚ â³ â”‚                         â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜                         â”‚â”‚
â”‚  â”‚                                                      â”‚â”‚
â”‚  â”‚ ç‰‡æ®µ2: ä¸æ—æ™šå¯¹è¯                                     â”‚â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”                                â”‚â”‚
â”‚  â”‚ â”‚é•œå¤´1â”‚ â”‚é•œå¤´2â”‚ â”‚é•œå¤´3â”‚  [ç”Ÿæˆå›¾ç‰‡] [ç”Ÿæˆè§†é¢‘]         â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜                                â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                          â”‚
â”‚  [ä¿å­˜åˆ†é•œ] [å…¨éƒ¨ç”Ÿæˆå›¾ç‰‡] [å…¨éƒ¨ç”Ÿæˆè§†é¢‘]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 å…¨è‡ªåŠ¨æµæ°´çº¿é¡µï¼ˆPipelineView.vueï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‚æ•°é…ç½®åŒº:                                              â”‚
â”‚  é¢˜æ:[  ] æç¤º:[          ] é›†æ•°:[5] è§†é¢‘æ¨¡å¼:[å•å›¾]      â”‚
â”‚  [x]è‡ªåŠ¨åˆæˆ  [ ]AIé…éŸ³  [å¯åŠ¨å…¨è‡ªåŠ¨ç”Ÿäº§]                  â”‚
â”‚                                                          â”‚
â”‚  å®¡æ ¸èŠ‚ç‚¹é…ç½®:                                            â”‚
â”‚  å°è¯´ç”Ÿæˆå: [AIè‡ªåŠ¨è´¨æ£€â–¾]  å¤§çº²ç”Ÿæˆå: [AIå¯¼æ¼”å®¡æ ¸â–¾]      â”‚
â”‚  åˆ†é•œå›¾å:   [AIå›¾ç‰‡è´¨æ£€â–¾]  è§†é¢‘ç‰‡æ®µå: [è·³è¿‡â–¾]           â”‚
â”‚                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                          â”‚
â”‚  æµæ°´çº¿è¿›åº¦:                                              â”‚
â”‚  âœ… Step 1: AIå°è¯´ç”Ÿæˆ        12åˆ†é’Ÿ  10ç« /10ç«            â”‚
â”‚  âœ… Step 2: æ•…äº‹çº¿æå–         30ç§’                       â”‚
â”‚  âœ… Step 3: åˆ†é›†å¤§çº²ç”Ÿæˆ       2åˆ†é’Ÿ   5é›†                â”‚
â”‚  âœ… Step 4: èµ„äº§æå–           10ç§’    12ä¸ªèµ„äº§            â”‚
â”‚  ğŸ”„ Step 5: èµ„äº§å›¾ç‰‡ç”Ÿæˆ      è¿›è¡Œä¸­   8/12               â”‚
â”‚  â³ Step 6: å‰§æœ¬ç”Ÿæˆ                                     â”‚
â”‚  â³ Step 7: åˆ†é•œç”Ÿæˆ                                     â”‚
â”‚  â³ Step 8: åˆ†é•œå›¾ç‰‡ç”Ÿæˆ                                  â”‚
â”‚  â³ Step 9: è§†é¢‘ç”Ÿæˆ                                     â”‚
â”‚  â³ Step 10: è§†é¢‘åˆæˆ                                    â”‚
â”‚                                                          â”‚
â”‚  [æš‚åœ] [å–æ¶ˆ]                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å…­ã€Axios è¯·æ±‚å°è£…

```typescript
// api/request.ts
import axios from 'axios'
import { useAuthStore } from '@/stores/auth'
import { ElMessage } from 'element-plus'

const request = axios.create({
  baseURL: '/api',
  timeout: 120000, // AI è°ƒç”¨å¯èƒ½è¾ƒæ…¢
})

request.interceptors.request.use((config) => {
  const auth = useAuthStore()
  if (auth.token) {
    config.headers.Authorization = `Bearer ${auth.token}`
  }
  return config
})

request.interceptors.response.use(
  (res) => {
    if (res.data.code !== 200) {
      ElMessage.error(res.data.message)
      return Promise.reject(res.data)
    }
    return res.data.data
  },
  (err) => {
    if (err.response?.status === 401) {
      useAuthStore().logout()
      window.location.href = '/login'
    }
    ElMessage.error(err.response?.data?.message || 'ç½‘ç»œé”™è¯¯')
    return Promise.reject(err)
  }
)

export default request
```
